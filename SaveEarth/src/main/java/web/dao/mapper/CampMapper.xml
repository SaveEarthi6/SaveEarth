<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="web.dao.face.CampDao">

	<select id="selectCntAll" resultType="int">
		SELECT count(*) FROM campaign
	</select>
	
	<select id="selectCampList" resultType="web.dto.Campaign" parameterType="web.util.Paging">
		SELECT * FROM (
	    	SELECT rownum rnum, C.* FROM (
	        	SELECT * FROM campaign ORDER BY camp_no DESC
	    	) C
		) CAMP
		WHERE rnum BETWEEN #{startNo} AND #{endNo}
	</select>
	
	<select id="selectCamp" resultType="map" parameterType="int">
		SELECT c.*, f.*
		FROM campaign c 
		LEFT OUTER JOIN campaign_file f
		ON c.camp_no = f.camp_no
		WHERE c.camp_no = #{campNo}
	</select>
	
	<select id="selectCntAllByState" resultType="int" parameterType="string">
		SELECT count(*) FROM campaign
		WHERE camp_state = #{state}
	</select>
	
<!-- 	<select id="selectCampListByState" resultType=""> -->
<!-- 		SELECT * FROM campaign -->
<!-- 		WHERE camp_state = #{state} -->
<!-- 	</select> -->
	
	<select id="selectCampListByState" resultType="web.dto.Campaign" parameterType="map">
		SELECT * FROM (
	    	SELECT rownum rnum, C.* FROM (
	        	SELECT * FROM campaign 
	        		WHERE camp_state = #{state} 
	        		ORDER BY camp_no DESC
	    	) C
		) CAMP
		WHERE rnum BETWEEN #{paging.startNo} AND #{paging.endNo}
	</select>

</mapper>
